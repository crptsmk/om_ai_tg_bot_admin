# üîß –ö–†–ò–¢–ò–ß–ù–´–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø –í–´–ü–û–õ–ù–ï–ù–´

## ‚úÖ –ß–¢–û –ò–°–ü–†–ê–í–õ–ï–ù–û:

### 1. **üí∞ –¶–µ–Ω–∞ –ø–æ–¥–ø–∏—Å–∫–∏:**
- **–ë–´–õ–û**: 999 ‚ÇΩ –Ω–∞ 30 –¥–Ω–µ–π
- **–°–¢–ê–õ–û**: 999 ‚ÇΩ –Ω–∞ 365 –¥–Ω–µ–π (–ì–û–î)
- –í—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω—ã

### 2. **üõ° –ú–æ–¥–µ—Ä–∞—Ü–∏—è –≥—Ä—É–ø–ø—ã:**
- **–ü–†–û–ë–õ–ï–ú–ê**: –ë–æ—Ç —É–¥–∞–ª—è–ª —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ –≥–ª–∞–≤–Ω–æ–π –≤–µ—Ç–∫–∏ "–ß–∞—Ç"
- **–ò–°–ü–†–ê–í–õ–ï–ù–û**: –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞
- –¢–µ–ø–µ—Ä—å –ù–ï —É–¥–∞–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –µ—Å–ª–∏:
  - `message_thread_id` —Ä–∞–≤–µ–Ω `None` (–≥–ª–∞–≤–Ω–∞—è –≤–µ—Ç–∫–∞)
  - `message_thread_id` —Ä–∞–≤–µ–Ω `1` (–æ—Å–Ω–æ–≤–Ω–∞—è —Ç–µ–º–∞)
  - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —è–≤–ª—è–µ—Ç—Å—è –∞–¥–º–∏–Ω–æ–º

### 3. **üåê YooKassa Webhook:**
- **–ó–∞–ø—É—â–µ–Ω webhook —Å–µ—Ä–≤–µ—Ä** –Ω–∞ –ø–æ—Ä—Ç—É 8000
- **URL –¥–ª—è YooKassa**: `http://–≤–∞—à-–¥–æ–º–µ–Ω:8000/webhook/yookassa`
- –°–µ—Ä–≤–µ—Ä –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± —É—Å–ø–µ—à–Ω—ã—Ö –ø–ª–∞—Ç–µ–∂–∞—Ö

## üöÄ –¢–ï–ö–£–©–ï–ï –°–û–°–¢–û–Ø–ù–ò–ï:

### **–ó–∞–ø—É—â–µ–Ω–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã:**
```bash
‚úÖ Telegram Bot: python bot.py (—Ä–∞–±–æ—Ç–∞–µ—Ç)
‚úÖ Webhook Server: python webhook_server.py (–ø–æ—Ä—Ç 8000)
```

### **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞:**
```bash
ps aux | grep bot.py        # Telegram –±–æ—Ç
ps aux | grep webhook       # Webhook —Å–µ—Ä–≤–µ—Ä
curl http://localhost:8000/health  # –ü—Ä–æ–≤–µ—Ä–∫–∞ webhook
```

## ‚öôÔ∏è –ù–ê–°–¢–†–û–ô–ö–ê YOOKASSA WEBHOOK:

### **–í –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ YooKassa:**
1. –ó–∞–π—Ç–∏ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –º–∞–≥–∞–∑–∏–Ω–∞ (Shop ID: 1115914)
2. –†–∞–∑–¥–µ–ª "–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è" –∏–ª–∏ "Webhooks"
3. –î–æ–±–∞–≤–∏—Ç—å URL: `http://–≤–∞—à-–¥–æ–º–µ–Ω:8000/webhook/yookassa`
4. –í—ã–±—Ä–∞—Ç—å —Å–æ–±—ã—Ç–∏—è: `payment.succeeded`
5. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### **–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ª–æ–∫–∞–ª—å–Ω–æ:**
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å ngrok –∏–ª–∏ –∞–Ω–∞–ª–æ–≥ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
ngrok http 8000
# –ü–æ–ª—É—á–∏—Ç—å –ø—É–±–ª–∏—á–Ω—ã–π URL —Ç–∏–ø–∞: https://abc123.ngrok.io
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å: https://abc123.ngrok.io/webhook/yookassa
```

## üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô:

### **1. –¢–µ—Å—Ç –º–æ–¥–µ—Ä–∞—Ü–∏–∏:**
- –ó–∞–π—Ç–∏ –≤ –≥—Ä—É–ø–ø—É AI Base
- –ù–∞–ø–∏—Å–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –≥–ª–∞–≤–Ω–æ–π –≤–µ—Ç–∫–µ "–ß–∞—Ç" ‚Üí –ù–ï –¥–æ–ª–∂–Ω–æ —É–¥–∞–ª—è—Ç—å—Å—è
- –ù–∞–ø–∏—Å–∞—Ç—å –≤ –¥—Ä—É–≥–æ–π –≤–µ—Ç–∫–µ ‚Üí –¥–æ–ª–∂–Ω–æ —É–¥–∞–ª—è—Ç—å—Å—è (–µ—Å–ª–∏ –Ω–µ –∞–¥–º–∏–Ω)

### **2. –¢–µ—Å—Ç –ø–æ–¥–ø–∏—Å–∫–∏:**
- `/start` ‚Üí –¥–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å 999 ‚ÇΩ –Ω–∞ –≥–æ–¥
- –ö–Ω–æ–ø–∫–∞ –æ–ø–ª–∞—Ç—ã ‚Üí YooKassa —Å—á–µ—Ç –Ω–∞ –≥–æ–¥

### **3. –¢–µ—Å—Ç webhook:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
curl http://localhost:8000/health

# –¢–µ—Å—Ç–æ–≤—ã–π webhook (–∏–º–∏—Ç–∞—Ü–∏—è YooKassa) 
curl -X POST http://localhost:8000/webhook/yookassa \
  -H "Content-Type: application/json" \
  -d '{"event":"payment.succeeded","object":{"id":"test"}}'
```

## üìä –û–ë–ù–û–í–õ–ï–ù–ù–ê–Ø –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø:

```
–¶–µ–Ω–∞: 999 ‚ÇΩ
–°—Ä–æ–∫: 365 –¥–Ω–µ–π (1 –≥–æ–¥)
AI –ª–∏–º–∏—Ç: 5 –∑–∞–ø—Ä–æ—Å–æ–≤/–¥–µ–Ω—å
–ú–æ–¥–µ—Ä–∞—Ü–∏—è: –¢–æ–ª—å–∫–æ –≤ –≤–µ—Ç–∫–∞—Ö ‚â† "–ß–∞—Ç"
Webhook URL: http://–¥–æ–º–µ–Ω:8000/webhook/yookassa
```

## ‚ö†Ô∏è –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò:

1. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å webhook –≤ YooKassa** (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—É–±–ª–∏—á–Ω—ã–π URL)
2. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã–π –ø–ª–∞—Ç–µ–∂** –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ webhook
3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–æ–¥–µ—Ä–∞—Ü–∏—é** –≤ —Ä–∞–∑–Ω—ã—Ö –≤–µ—Ç–∫–∞—Ö –≥—Ä—É–ø–ø—ã
4. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –¥–æ–º–µ–Ω** –¥–ª—è production webhook URL

---

## üéØ **–ö–†–ò–¢–ò–ß–ù–´–ï –ü–†–û–ë–õ–ï–ú–´ –ò–°–ü–†–ê–í–õ–ï–ù–´!**
- ‚úÖ –¶–µ–Ω–∞ —Ç–µ–ø–µ—Ä—å 999 ‚ÇΩ –≤ –≥–æ–¥
- ‚úÖ –ì–ª–∞–≤–Ω–∞—è –≤–µ—Ç–∫–∞ "–ß–∞—Ç" –∑–∞—â–∏—â–µ–Ω–∞ –æ—Ç –º–æ–¥–µ—Ä–∞—Ü–∏–∏  
- ‚úÖ Webhook —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –¥–ª—è YooKassa

**–ë–æ—Ç –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é —Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º–∏! üöÄ**